__max_num_agp_instances: &max_num_agp_instances 4

module_name: ekf2
parameters:
- group: EKF2
  definitions:
    EKF2_AGP${i}_ID:
      description:
        short: Auxiliary global position sensor ${i} ID
        long: 'Sensor ID for slot ${i}. Set to 0 to disable this slot.'
      type: int32
      default: 0
      min: 0
      max: 255
      num_instances: *max_num_agp_instances
      instance_start: 0
    EKF2_AGP${i}_CTRL:
      description:
        short: Auxiliary global position sensor ${i} aiding
        long: 'Set bits in the following positions to enable: 0 : Horizontal position
          fusion 1 : Vertical position fusion'
      type: bitmask
      bit:
        0: Horizontal position
        1: Vertical position
      default: 0
      min: 0
      max: 3
      num_instances: *max_num_agp_instances
      instance_start: 0
    EKF2_AGP${i}_MODE:
      description:
        short: Fusion reset mode for sensor ${i}
        long: 'Automatic: reset on fusion timeout if no other source of position is available
          Dead-reckoning: reset on fusion timeout if no source of velocity is available'
      type: enum
      values:
        0: Automatic
        1: Dead-reckoning
      default: 0
      num_instances: *max_num_agp_instances
      instance_start: 0
    EKF2_AGP${i}_DELAY:
      description:
        short: Auxiliary global position sensor ${i} delay (to IMU)
      type: float
      default: 0
      min: 0
      max: 1000
      unit: ms
      reboot_required: true
      decimal: 1
      num_instances: *max_num_agp_instances
      instance_start: 0
    EKF2_AGP${i}_NOISE:
      description:
        short: Measurement noise for auxiliary global position sensor ${i}
        long:  Used to lower bound or replace the uncertainty included in the message
      type: float
      default: 1.0
      min: 0.01
      unit: m
      decimal: 2
      num_instances: *max_num_agp_instances
      instance_start: 0
    EKF2_AGP${i}_GATE:
      description:
        short: Gate size for auxiliary global position sensor ${i} fusion
        long: Sets the number of standard deviations used by the innovation consistency
          test.
      type: float
      default: 3.0
      min: 1.0
      unit: SD
      decimal: 1
      num_instances: *max_num_agp_instances
      instance_start: 0
