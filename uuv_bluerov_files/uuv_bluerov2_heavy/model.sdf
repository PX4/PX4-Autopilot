<?xml version="1.0" encoding="UTF-8"?>
<sdf version='1.9'>
  <model name="uuv_bluerov2_heavy">
    <!-- Pose remains the same -->
    <pose>0 0 0 0 0 0</pose>

    <!-- Base link definition unchanged except for velocity_decay note -->
    <link name="base_link">
      <inertial>
        <mass>11</mass>
        <inertia>
            <ixx>0.1</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.1</iyy>
            <iyz>0</iyz>
            <izz>0.1</izz>
        </inertia>
      </inertial>

        <collision name='body_collision'>
                <geometry>
                  <sphere>
                    <radius>0.1535</radius>
                  </sphere>
                </geometry>
          </collision>

      <!-- Visual definition unchanged for mesh -->
      <visual name="base_link_visual">
        <geometry>
          <mesh>
            <uri>model://uuv_bluerov2_heavy/meshes/BlueROV2heavy.dae</uri>
          </mesh>
        </geometry>
      </visual>

          <!-- Navsat sensor -->
          <sensor name="navsat_sensor" type="navsat">
            <always_on>1</always_on>
            <update_rate>30</update_rate>
          </sensor>

          <!-- IMU Sensor Replacement (standard Gazebo format) -->
            <sensor name="imu_sensor" type="imu">
              <always_on>1</always_on>
              <update_rate>250</update_rate>
              <imu>
                <angular_velocity>
                  <!-- Noise modeled after IIM42653 -->
                  <!-- 0.05 deg/s converted to rad/s -->
                  <x>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.0008726646</stddev>
                    </noise>
                  </x>
                  <y>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.0008726646</stddev>
                    </noise>
                  </y>
                  <z>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.0008726646</stddev>
                    </noise>
                  </z>
                </angular_velocity>
                <linear_acceleration>
                  <!-- Noise modeled after IIM42653 -->
                  <!-- X & Y axis: 0.65 mg-rms converted to m/ss -->
                  <x>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.00637</stddev>
                    </noise>
                  </x>
                  <y>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.00637</stddev>
                    </noise>
                  </y>
                  <!-- Z axis: 0.70 mg-rms converted to m/ss-->
                  <z>
                    <noise type="gaussian">
                      <mean>0.0</mean>
                      <stddev>0.00686</stddev>
                    </noise>
                  </z>
                </linear_acceleration>
              </imu>
          </sensor>

          <!-- Magnetometer Sensor (standard Gazebo) -->
            <sensor name="magnetometer_sensor" type="magnetometer">
              <always_on>1</always_on>
              <update_rate>100</update_rate>
              <magnetometer>
                <!-- TODO: update to fix units and coordinate system when we move past Harmonic -->
                <!-- See https://github.com/gazebosim/gz-sim/pull/2460 -->
                <!-- 3mgauss RMS: NOTE: noise is in tesla but sensor reports data in gauss -->
                <!-- Noise modeled after IIS2MDC -->
                <x>
                  <noise type="gaussian">
                    <stddev>0.0001</stddev>
                  </noise>
                </x>
                <y>
                  <noise type="gaussian">
                    <stddev>0.0001</stddev>
                  </noise>
                </y>
                <z>
                  <noise type="gaussian">
                    <stddev>0.0001</stddev>
                  </noise>
                </z>
              </magnetometer>
            </sensor>

          <!-- Barometer Sensor -->
      <sensor name="air_pressure_sensor" type="air_pressure">
              <always_on>1</always_on>
              <update_rate>50</update_rate>
              <air_pressure>
                <!-- Noise modeled after BMP390 -->
                <pressure>
                  <noise type="gaussian">
                    <mean>0</mean>
                    <stddev>3</stddev>
                  </noise>
                </pressure>
              </air_pressure>
          </sensor>


    </link>

        <!-- this is like a pendulum, to counteract the circular Buoyancy force -->
        <link name="weight_link">
        <pose>0 0 -0.1 0 0 0</pose>
          <inertial>
            <mass>4</mass>
            <inertia>
                <ixx>1e-06</ixx>
                <ixy>0</ixy>
                <ixz>0</ixz>
                <iyy>1e-06</iyy>
                <iyz>0</iyz>
                <izz>1e-06</izz>
            </inertia>
          </inertial>
    </link>
    <joint name="weight_joint" type="fixed">
                        <parent>base_link</parent>
                        <child>weight_link</child>
                    </joint>






        <link name="thruster0">
                    <pose>0.14 -0.10 0 0 1.570796 0.78539815</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster0_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Green</name>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster0_joint" type="revolute">
                    <axis>
                        <xyz>0 0 1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster0</child>
                </joint>

                <link name="thruster1">
                    <pose>0.14 0.10 0 0 1.570796 -0.78539815</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster1_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Green</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster1_joint" type="revolute">
                    <axis>
                        <xyz>0 0 1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster1</child>
                </joint>


                <link name="thruster2">
                    <pose>-0.14 -0.10 0 0 1.570796 2.356194</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster2_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Blue</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster2_joint" type="revolute">
                    <axis>
                        <xyz>0 0 -1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster2</child>
                </joint>





                <link name="thruster3">
                    <pose>-0.14 0.10 0 0 1.570796 -2.356194</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster3_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Blue</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster3_joint" type="revolute">
                    <axis>
                        <xyz>0 0 -1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster3</child>
                </joint>


                <link name="thruster4">
                    <pose>0.12 -0.22 0.06 0 0 0</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster4_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Green</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster4_joint" type="revolute">
                    <axis>
                        <xyz>0 0 1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster4</child>
                </joint>



                <link name="thruster5">
                    <pose>0.12 0.22 0.06 0 0 0</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster5_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Blue</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster5_joint" type="revolute">
                    <axis>
                        <xyz>0 0 -1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster5</child>
                </joint>




                <link name="thruster6">
                    <pose>-0.12 -0.22 0.06 0 0 0</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster6_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Blue</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster6_joint" type="revolute">
                    <axis>
                        <xyz>0 0 -1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster6</child>
                </joint>


                <link name="thruster7">
                    <pose>-0.12 0.22 0.06 0 0 0</pose>
                    <inertial>
                        <mass>1e-10</mass>
                        <inertia>
                            <ixx>1e-06</ixx>
                            <ixy>0</ixy>
                            <ixz>0</ixz>
                            <iyy>1e-06</iyy>
                            <iyz>0</iyz>
                            <izz>1e-06</izz>
                        </inertia>
                    </inertial>
                    <visual name="thruster7_visual">
                        <geometry>
                            <mesh>
                                <scale>1 1 1</scale>
                                <uri>model://uuv_bluerov2_heavy/meshes/prop.dae</uri>
                            </mesh>
                        </geometry>
                        <material>
                            <script>
                                <name>Gazebo/Green</name>
                                <uri>file://media/materials/scripts/gazebo.material</uri>
                            </script>
                        </material>
                    </visual>
                </link>

                <joint name="thruster7_joint" type="revolute">
                    <axis>
                        <xyz>0 0 1</xyz>
                        <limit>
                            <lower>-1e+16</lower>
                            <upper>1e+16</upper>
                        </limit>
                    </axis>
                    <parent>base_link</parent>
                    <child>thruster7</child>
                </joint>

    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster0_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_0</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster1_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_1</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster2_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_2</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster3_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_3</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster4_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_4</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster5_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
<namespace>model/uuv_bluerov2_heavy_0</namespace>


           <topic>thrust_5</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster6_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_6</topic>
        </plugin>
    <plugin
          filename="gz-sim-thruster-system"
          name="gz::sim::systems::Thruster">
          <joint_name>thruster7_joint</joint_name>
          <thrust_coefficient>1.0</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
          <velocity_control>true</velocity_control>
          <namespace>model/uuv_bluerov2_heavy_0</namespace>
          <topic>thrust_7</topic>
        </plugin>


        <!-- Uncomment to add hydrodynamics -->
        <plugin
                filename="gz-sim-hydrodynamics-system"
                name="gz::sim::systems::Hydrodynamics">
                <link_name>base_link</link_name>
                <xDotU>-1.11</xDotU>
                <yDotV>-2.8</yDotV>
                <zDotW>-2.8</zDotW>
                <kDotP>-0.00451</kDotP>
                <mDotQ>-0.0163</mDotQ>
                <nDotR>-0.0163</nDotR>
                <xUabsU>-0.2</xUabsU>
                <xU>-5.39</xU>
                <yVabsV>-0.2</yVabsV>
                <yV>-17.36</yV>
                <zWabsW>-0.2</zWabsW>
                <zW>-17.36</zW>
                <kPabsP>-0.2</kPabsP>
                <kP>-0.00114 </kP>
                <mQabsQ>-0.2</mQabsQ>
                <mQ>-0.007</mQ>
                <nRabsR>-0.2</nRabsR>
                <nR>-0.007</nR>
        </plugin>

  </model>
</sdf>
