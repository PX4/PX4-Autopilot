#
# This file is autogenerated: PLEASE DO NOT EDIT IT.
#
# You can use "make menuconfig" to make any modifications to the installed .config file.
# You can then do "make savedefconfig" to generate a new defconfig file that includes your
# modifications.
#
# CONFIG_LIBC_LONG_LONG is not set
# FIXME this seem to make it crash, without rcS is not fully working
CONFIG_NSH_ARGCAT=y
CONFIG_NSH_QUOTE=n

# CONFIG_NSH_CMDOPT_HEXDUMP is not set
# CONFIG_NSH_DISABLE_DATE is not set
# CONFIG_NSH_DISABLE_LOSMART is not set
# CONFIG_RP23XX_DMAC is not set
# CONFIG_STANDARD_SERIAL is not set
CONFIG_BOOT_COPYTORAM=y
CONFIG_BOOT_RUNFROMFLASH=y
CONFIG_ARCH="arm"
CONFIG_ARCH_BOARD_CUSTOM=y
# FIXME: hack loading original nuttx conf/code?
CONFIG_ARCH_BOARD_CUSTOM_DIR="../../../../boards/raspberrypi/pico-2/nuttx-config"
CONFIG_ARCH_BOARD_CUSTOM_DIR_RELPATH=y
CONFIG_ARCH_BOARD_CUSTOM_NAME="px4"

# pimoroni-plus-2:nsh
CONFIG_ARCH_CHIP="rp23xx"
CONFIG_ARCH_CHIP_RP23XX=y
CONFIG_ARCH_RAMVECTORS=y
CONFIG_ARCH_STACKDUMP=y
CONFIG_BOARDCTL_RESET=y
CONFIG_BOARD_LOOPSPERMSEC=10450
CONFIG_BUILTIN=y
CONFIG_DEBUG_FULLOPT=y
CONFIG_DEBUG_SYMBOLS=y
CONFIG_DISABLE_POSIX_TIMERS=y
CONFIG_EXAMPLES_HELLO=y
CONFIG_FS_PROCFS=y
CONFIG_FS_PROCFS_REGISTER=y
CONFIG_INIT_ENTRYPOINT="nsh_main"
CONFIG_NFILE_DESCRIPTORS_PER_BLOCK=6
CONFIG_NSH_ARCHINIT=y
CONFIG_NSH_BUILTIN_APPS=y
CONFIG_NSH_READLINE=y
CONFIG_RAM_SIZE=532480
CONFIG_RAM_START=0x20000000
CONFIG_RAW_BINARY=y
CONFIG_READLINE_CMD_HISTORY=y
CONFIG_RR_INTERVAL=200
CONFIG_SCHED_WAITPID=y
CONFIG_START_DAY=9
CONFIG_START_MONTH=2
CONFIG_START_YEAR=2025
CONFIG_SYSLOG_CONSOLE=y
CONFIG_SYSTEM_NSH=y
CONFIG_TESTING_GETPRIME=y
CONFIG_TESTING_OSTEST=y
# fixme!!!
# CONFIG_SUPPRESS_UART_CONFIG=n dont work: only A printed, no TX
# CONFIG_SUPPRESS_UART_CONFIG=n totest
# default baud is 115200
# baud needs to match it seems!!!
CONFIG_UART0_BAUD=115200
# if yes, the console indicatos showprogress are making loading stuck
# with both CONFIG_SUPPRESS_UART_CONFIG=y CONFIG_SUPPRESS_SERIAL_INTS=y serial dont work at all? or CONFIG_USE_SERIALDRIVER=y
CONFIG_SUPPRESS_UART_CONFIG=n
CONFIG_SUPPRESS_SERIAL_INTS=n
# seems it didnt help to disable serial driver when tried before, but code should be much simpler then
CONFIG_USE_SERIALDRIVER=y
# not needed the two?
CONFIG_HAVE_UART_DEVICE=y
CONFIG_HAVE_UART=y
# end of pimoroni-plus-2:nsh

# vidma
# CONFIG_HRT_TIMER=y


# not neeeded nor helping?
CONFIG_SCHED_HPWORK=y
CONFIG_SCHED_HPWORKPRIORITY=249
CONFIG_SCHED_HPWORKSTACKSIZE=1280
# fixme - doesn't compile with this enabled
CONFIG_SCHED_INSTRUMENTATION=y
CONFIG_SCHED_INSTRUMENTATION_EXTERNAL=y
# FIXME fixing build for now =n
CONFIG_SCHED_INSTRUMENTATION_SWITCH=y

CONFIG_SCHED_LPWORK=y
CONFIG_SCHED_LPWORKPRIORITY=50
CONFIG_SCHED_LPWORKSTACKSIZE=1632
# not needed imho
CONFIG_LIBC_INLINE_QUEUE=n

CONFIG_MMCSD=y
CONFIG_MMCSD_SPI=y

#FIXME currently dont compile without SPI nor I2C
# FIXME?
CONFIG_RP23XX_RP2350B=y
CONFIG_RP23XX_SPI0=y
CONFIG_RP23XX_BOARD_MADFLIGHT_FC1=y
# FIXME?
CONFIG_RP23XX_SPI1=y
CONFIG_RP23XX_SPI=y

CONFIG_RP23XX_I2C0=y
CONFIG_RP23XX_I2C1=y
CONFIG_RP23XX_I2C=y
CONFIG_I2C_RESET=y

# FIXME: -lromfs ?
CONFIG_ETC_ROMFS=y
CONFIG_FS_ROMFS=y
CONFIG_FS_BINFS=y
CONFIG_FS_CROMFS=y

# initialized in rp23xx ?
#CONFIG_ETC_ROMFS=n

CONFIG_FAT_DMAMEMORY=y
CONFIG_FAT_LCNAMES=y
CONFIG_FAT_LFN=y
CONFIG_FAT_LFN_ALIAS_HASH=y
CONFIG_FDCLONE_STDIO=y
CONFIG_FS_BINFS=y
CONFIG_FS_FAT=y
CONFIG_FS_FATTIME=y

# needed UART console plus whatever
# default uart0 for console (nuttx board)
CONFIG_RP23XX_UART0=y
#CONFIG_RP23XX_UART0_RX_GPIO=1
#CONFIG_RP23XX_UART0_TX_GPIO=0
# qwst plug
CONFIG_RP23XX_UART1=y
# elrs
# CONFIG_UART1_BAUD=420000
# gps
CONFIG_UART1_BAUD=115200
# FIXME: HAD SPI0 here?!
#CONFIG_RP23XX_UART1_RX_GPIO
#CONFIG_RP23XX_UART1_TX_GPIO

# needed
CONFIG_FS_CROMFS=n
CONFIG_FS_ROMFS=y
CONFIG_GRAN=y
CONFIG_GRAN_INTR=y
CONFIG_HAVE_CXX=y
CONFIG_HAVE_CXXINITIALIZE=y
CONFIG_IDLETHREAD_STACKSIZE=2048
CONFIG_LIBC_FLOATINGPOINT=y
CONFIG_LIBC_MAX_EXITFUNS=1
# pico
CONFIG_LIBC_STRERROR=y
CONFIG_MEMSET_64BIT=y
CONFIG_MEMSET_OPTSPEED=y
CONFIG_NSH_CROMFSETC=y

CONFIG_NSH_DISABLE_REBOOT=y
CONFIG_NSH_FATDEVNO=0
CONFIG_NSH_FILEIOSIZE=512
CONFIG_NSH_LINELEN=128
CONFIG_NSH_MAXARGUMENTS=15
CONFIG_NSH_NESTDEPTH=8
CONFIG_NSH_STRERROR=y
CONFIG_NSH_VARS=y
CONFIG_PIPES=y

#CONFIG_PREALLOC_TIMERS=50
CONFIG_PRIORITY_INHERITANCE=y
#CONFIG_PTHREAD_STACK_MIN=512
#CONFIG_PTHREAD_STACK_DEFAULT=4096
CONFIG_INIT_STACKSIZE=4096

# fixme SMP ?
# CONFIG_MODULES_LOAD_MON and watchdog would need these
CONFIG_TASK_NAME_SIZE=24
CONFIG_WATCHDOG=y
CONFIG_STACK_COLORATION=y
CONFIG_IDLETHREAD_STACKSIZE=2048
# FIXME!!!!
CONFIG_ARCH_FPU=n
# CONFIG_BUILD_PROTECTED
# r10?
CONFIG_ARMV8M_STACKCHECK_HARDWARE=y
# with SMP gives armv8-m/arm_exception.S:217: Error: bad instruction `setintstack r2,r3'
# https://github.com/apache/nuttx/blob/fabf4a5142d09a47f0b8d47b37df45a386914a9d/sched/Kconfig
CONFIG_ARCH_INTERRUPTSTACK=1024
CONFIG_ARCH_RAMVECTORS=y
CONFIG_ARCH_STACKDUMP=y
CONFIG_BOARDCTL_RESET=y
CONFIG_BOARD_RESET_ON_ASSERT=2
CONFIG_MAX_TASKS=16

# fixme CONFIG_SMP is not defined
# fixme what is that?
CONFIG_SMP=n
CONFIG_ARMV8M_USEBASEPRI=y
CONFIG_SMP_NCPUS=1
CONFIG_TESTING_SMP=n

CONFIG_DISABLE_MQUEUE=y
CONFIG_DISABLE_POSIX_TIMERS=y
CONFIG_ARCH_HAVE_MULTICPU=y

# ?
CONFIG_BOARD_ASSERT_RESET_VALUE=0
CONFIG_DEV_FIFO_SIZE=0
CONFIG_DEV_PIPE_SIZE=70

# not needed nor useful?
# CONFIG_DEBUG_HARDFAULT_INFO=y
# fixme this was making init stuck as it thinks UART TX queue is full. maybe bad config it was?
# but after some other changes, it dont
CONFIG_DEBUG_FEATURES=y
# this didnt help?
# CONFIG_USE_EARLYSERIALINIT=n gives Xabbb
# CONFIG_USE_EARLYSERIALINIT=y gives Xabbb, and nothing after
# FIXME ?
CONFIG_USE_EARLYSERIALINIT=y
# FIXME: trying for now to simplify serial console?!
# not receiveing anything on UART0
# CONFIG_DEBUG_HARDFAULT_INFO=y
CONFIG_DEBUG_SYMBOLS=y
# CONFIG_DEBUG_ASSERTIONS=y
# CONFIG_DEBUG_ASSERTIONS_EXPRESSION=y
CONFIG_DEBUG_BUSFAULT=y
# CONFIG_DEBUG_FULLOPT=y
# CONFIG_DEBUG_HARDFAULT_ALERT=y
# CONFIG_DEBUG_USAGEFAULT=y


# missing compared to pico-1
CONFIG_SEM_PREALLOCHOLDERS=32
# FIXME: in pico-1 but not in nuttX orig
# no serial RX anymore?
# Try disabled for now, simpler?
# FIXME: re-enable, is it tested ok?
CONFIG_SERIAL_TERMIOS=y
CONFIG_SIG_DEFAULT=y
CONFIG_SIG_SIGALRM_ACTION=y
CONFIG_SIG_SIGUSR1_ACTION=y
CONFIG_SIG_SIGUSR2_ACTION=y
CONFIG_SIG_SIGWORK=4
CONFIG_STACK_COLORATION=y

CONFIG_STDIO_BUFFER_SIZE=32
CONFIG_CDCACM=y
CONFIG_SYSTEM_CDCACM=y
CONFIG_CDCACM_PRODUCTSTR="PX4 RaspberryPi Pico 2"
CONFIG_CDCACM_RXBUFSIZE=600
CONFIG_CDCACM_TXBUFSIZE=2000
#CONFIG_TASK_NAME_SIZE=24
CONFIG_USBDEV=y
CONFIG_USBDEV_BUSPOWERED=y
CONFIG_USBDEV_MAXPOWER=1000
# FIXME?
CONFIG_USEC_PER_TICK=1000
#CONFIG_WATCHDOG=y
# does not work yet
# CONFIG_NSH_USBCONSOLE=n
CONFIG_UART0_SERIAL_CONSOLE=y
# CONFIG_UART0_TXBUFSIZE=384
CONFIG_UART0_TXBUFSIZE=384


#CONFIG_EXAMPLES_USBSERIAL=y


CONFIG_MTD=y
CONFIG_MTD_BYTE_WRITE=y
CONFIG_MTD_PARTITION=y
CONFIG_MTD_RAMTRON=y

#CONFIG_FLASH_BASED_PARAMS=y
#CONFIG_ARCH_HAVE_PROGMEM=y
# not needed CONFIG_BOARD_PARAM_FILE="/mnt/qspi/params"
# this should mount part of flash
CONFIG_RP23XX_FLASH_FILE_SYSTEM=n
CONFIG_SMARTFS_ALIGNED_ACCESS=y
CONFIG_MTD_SMART=y
CONFIG_FS_SMARTFS=y
#CONFIG_RP23XX_FLASH_LENGTH=16777216
CONFIG_RP23XX_FLASH_LENGTH=2097152
CONFIG_DEBUG_FS_INFO=y
CONFIG_RP23XX_FLASH_MOUNT_POINT="/flash"


# this is the important thing when UART dont work
CONFIG_BOARD_ENABLE_CONSOLE_BUFFER=y

CONFIG_RP23XX_SPI_DMA=n
# platforms/nuttx/NuttX/nuttx/include/debug.h
CONFIG_DEBUG_SPI_INFO=y
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_WARN=y
CONFIG_DEBUG_SPI_WARN=y
CONFIG_DEBUG_SPI_ERROR=y
